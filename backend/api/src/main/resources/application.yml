server:
  port: 8080
spring:
  profiles:
    active: dev
    # cette ligne permet d'exclure la configuration de sécurité par défaut de Springboot. Ainsi, on redéfinira la configuration selon notre convenance.
  autoconfigure:
    exclude: org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,org.springframework.boot.actuate.autoconfigure.security.servlet.ManagementWebSecurityAutoConfiguration
  application:
    name: star-backend
management:
  endpoint:
    health:
      probes:
        enabled: true
    metrics:
      enabled: false
  endpoints:
    web:
      exposure:
        include: "*"
      base-path: /

# the realm name
keycloak:
  realm: star-dapp
  auth-server-url: https://star.localhost/auth/
  ssl-required: none
  disable-trust-manager: true
  # the client name
  resource: star-backend-springboot
  bearer-only: true
  credentials:
    secret: 34f485e9ac95696a0d9f
  use-resource-role-mappings: true
  principal-attribute: preferred_username
  # Secured and only for role admin
  securityConstraints[0]:
    authRoles[0]: ROLE_ADMIN
    securityCollections[0]:
      patterns[0]: /api/admin
  # Secured and only for role manager
  security-constraints[1]:
    authRoles[0]: ROLE_MANAGER
    securityCollections[0]:
      patterns[0]: /api/manager

