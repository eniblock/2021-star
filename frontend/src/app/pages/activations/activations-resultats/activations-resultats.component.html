<table mat-table matSort [dataSource]="dataComputed" class="w-100 activations" (matSortChange)="sortChange.emit($event)">

  <ng-container matColumnDef="technologyType">
    <th mat-header-cell *matHeaderCellDef> {{ 'technologyType' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element">
      <app-icon-technology-type [technologyType]="element.site.technologyType"></app-icon-technology-type>
    </td>
  </ng-container>

  <ng-container matColumnDef="originAutomationRegisteredResourceMrid">
    <th mat-header-cell *matHeaderCellDef> {{ 'originAutomationRegisteredResourceMrid' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element"> <strong>{{ element.ordreLimitation.originAutomationRegisteredResourceMrid }}</strong> </td>
  </ng-container>

  <ng-container matColumnDef="producerMarketParticipantName">
    <th mat-header-cell *matHeaderCellDef> {{ 'producerMarketParticipantName' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element"> <strong>{{ element.producer.producerMarketParticipantName }}</strong> </td>
  </ng-container>

  <ng-container matColumnDef="siteName">
    <th mat-header-cell *matHeaderCellDef> {{ 'siteName' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element"> {{ element.site.siteName }} </td>
  </ng-container>

  <ng-container matColumnDef="producerMarketParticipantMrid">
    <th mat-header-cell *matHeaderCellDef> {{ 'producerMarketParticipantMrid' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element"> {{ element.producer.producerMarketParticipantMrid }} </td>
  </ng-container>

  <ng-container matColumnDef="debutLimitation">
    <th mat-header-cell *matHeaderCellDef> {{ 'debutLimitation' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element">
        <div class="text-emph">Début {{ getSystemOperatorName(element.ordreLimitation.senderMarketParticipantMrid) }}</div>
        <span *ngIf="element.ordreLimitation.startCreatedDateTime">{{ element.ordreLimitation.startCreatedDateTime | date:'shortDate' }}<br/><strong>{{ element.ordreLimitation.startCreatedDateTime | date:'mediumTime' }}</strong></span>
        <span *ngIf="!element.ordreLimitation.startCreatedDateTime">-</span>
      <div *ngIf="element.subOrderList.length > 0" class="pt-3"></div>
      <div *ngIf="element.subOrderList.length > 0">
        <div class="text-emph">Début {{ getSystemOperatorName(element.subOrderList[0].senderMarketParticipantMrid) }}</div>
        <span *ngIf="element.subOrderList[0].startCreatedDateTime">{{ element.subOrderList[0].startCreatedDateTime | date:'shortDate' }}<br/><strong>{{ element.subOrderList[0].startCreatedDateTime | date:'mediumTime' }}</strong></span>
        <span *ngIf="!element.subOrderList[0].startCreatedDateTime">-</span>
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="finLimitation">
    <th mat-header-cell *matHeaderCellDef> {{ 'finLimitation' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element">
      <div class="text-emph">Fin {{ getSystemOperatorName(element.ordreLimitation.senderMarketParticipantMrid) }}</div>
      <span *ngIf="element.ordreLimitation.endCreatedDateTime">{{ element.ordreLimitation.endCreatedDateTime | date:'shortDate' }}<br/><strong>{{ element.ordreLimitation.endCreatedDateTime | date:'mediumTime' }}</strong></span>
      <span *ngIf="!element.ordreLimitation.endCreatedDateTime">-</span>
      <div *ngIf="element.subOrderList.length > 0" class="pt-3"></div>
      <div *ngIf="element.subOrderList.length > 0">
        <div class="text-emph">Fin {{ getSystemOperatorName(element.subOrderList[0].senderMarketParticipantMrid) }}</div>
        <span *ngIf="element.subOrderList[0].endCreatedDateTime">{{ element.subOrderList[0].endCreatedDateTime | date:'shortDate' }}<br/><strong>{{ element.subOrderList[0].endCreatedDateTime | date:'mediumTime' }}</strong></span>
        <span *ngIf="!element.subOrderList[0].endCreatedDateTime">-</span>
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="typeLimitation">
    <th mat-header-cell *matHeaderCellDef> {{ 'typeLimitation' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element"> {{ element.limitationType }} </td>
  </ng-container>

  <ng-container matColumnDef="quantity">
    <th mat-header-cell *matHeaderCellDef> {{ 'quantity' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element"> {{ element.energyAmount.quantity}}</td>
  </ng-container>

  <ng-container matColumnDef="motif">
    <th mat-header-cell *matHeaderCellDef> {{ 'motif' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element"> {{ element.motif }} </td>
  </ng-container>

  <ng-container matColumnDef="indemnisation">
    <th mat-header-cell *matHeaderCellDef> {{ 'indemnisation' | ActivationTableField }} </th>
    <td mat-cell *matCellDef="let element"> - </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef> Actions </th>
    <td mat-cell *matCellDef="let element"> <button mat-icon-button (click)="showGraph(element)"><i class="fa-solid fa-chart-line"></i></button> </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
  <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
</table>
